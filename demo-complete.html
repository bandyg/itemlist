<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Angular 8 ItemList Application - å®Œæ•´æ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }

        .app-container {
            min-height: 100vh;
            background: #f5f5f5;
        }

        .toolbar {
            height: 60px;
            display: flex;
            align-items: center;
            background-color: #1976d2;
            color: white;
            font-weight: 600;
            padding: 0 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .spacer {
            flex: 1;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            margin-left: 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .nav-btn.active {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .view-section {
            display: none;
        }

        .view-section.active {
            display: block;
        }

        /* Welcome Section */
        .welcome-section {
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-section h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        .welcome-section p {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 40px;
        }

        .feature-cards {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .feature-card {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            max-width: 300px;
            text-align: left;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        .feature-card h3 {
            color: #1976d2;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .feature-card p {
            color: #666;
            line-height: 1.5;
            margin: 0;
        }

        /* Item List Component Styles */
        .item-list-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .item-list-title {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #1976d2;
            padding-bottom: 10px;
        }

        .item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: #f9f9f9;
            border-radius: 6px;
            border-left: 4px solid #1976d2;
            transition: all 0.3s ease;
            cursor: move;
        }

        .item:hover {
            background: #f0f0f0;
            transform: translateX(5px);
        }

        .item.dragging {
             box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
             transform: rotate(2deg);
             z-index: 1000;
         }

         .drag-handle {
             color: #999;
             margin-right: 12px;
             cursor: grab;
             font-size: 16px;
             transition: color 0.3s ease;
         }

         .drag-handle:hover {
             color: #ff9800;
         }

         .drag-handle:active {
             cursor: grabbing;
         }

         .drag-placeholder {
             opacity: 0.4;
             background: #f0f0f0;
             border: 2px dashed #ccc;
             border-radius: 6px;
             min-height: 60px;
         }

         .drop-zone {
             min-height: 100px;
             transition: all 0.3s ease;
         }

         .drop-zone.drag-over {
             background: #f8f9fa;
         }

        .item-info {
            flex: 1;
            margin-right: 15px;
        }

        .item-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .item-price {
            color: #666;
            font-size: 0.9em;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }

        .quantity-btn {
            background: #1976d2;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn:hover {
            background: #1565c0;
        }

        .quantity-display {
            margin: 0 15px;
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .move-btn, .remove-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .move-btn {
            background: #4caf50;
            color: white;
        }

        .move-btn:hover {
            background: #45a049;
        }

        .remove-btn {
            background: #f44336;
            color: white;
        }

        .remove-btn:hover {
            background: #da190b;
        }

        /* Important Notice Component Styles */
        .notice-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .notice-title {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #ff9800;
            padding-bottom: 10px;
        }

        .notice-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            margin-bottom: 10px;
            background: #fff3e0;
            border-radius: 6px;
            border-left: 4px solid #ff9800;
            cursor: move;
            transition: all 0.3s ease;
        }

        .notice-item.dragging {
             box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
             transform: rotate(2deg);
             z-index: 1000;
         }

        .notice-item-info {
            flex: 1;
        }

        .notice-item-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .notice-item-desc {
            color: #666;
            font-size: 0.9em;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #4caf50;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .notice-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }

        .notice-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .update-btn {
            background: #4caf50;
            color: white;
        }

        .update-btn:hover {
            background: #45a049;
        }

        .reset-btn {
            background: #ff9800;
            color: white;
        }

        .reset-btn:hover {
            background: #f57c00;
        }

        .back-btn {
            background: #2196f3;
            color: white;
        }

        .back-btn:hover {
            background: #1976d2;
        }

        .status-message {
            text-align: center;
            padding: 20px;
            background: #e8f5e8;
            border-radius: 6px;
            margin-top: 20px;
            color: #2e7d32;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .toolbar {
                flex-direction: column;
                height: auto;
                padding: 10px;
            }
            
            .nav-btn {
                margin: 5px;
            }
            
            .feature-cards {
                flex-direction: column;
                align-items: center;
            }
            
            .welcome-section h1 {
                font-size: 2em;
            }

            .item {
                flex-direction: column;
                align-items: flex-start;
            }

            .quantity-controls, .action-buttons {
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="toolbar">
            <span>ItemList App</span>
            <div class="spacer"></div>
            <button class="nav-btn" id="welcomeBtn" onclick="showView('welcome')">æ¬¢è¿é¡µé¢</button>
            <button class="nav-btn" id="itemListBtn" onclick="showView('itemList')">å•†å“åˆ—è¡¨</button>
            <button class="nav-btn" id="noticeBtn" onclick="showView('notice')">é‡è¦é€šçŸ¥</button>
        </div>

        <!-- Main Content -->
        <div class="content">
            <!-- Welcome Section -->
            <div id="welcome" class="view-section active">
                <div class="welcome-section">
                    <h1>ğŸ‰ æ¬¢è¿ä½¿ç”¨ Angular 8 ItemList åº”ç”¨!</h1>
                    <p>æ­¤åº”ç”¨ç¨‹åºæ¼”ç¤ºäº†ä¸¤ä¸ªä¸»è¦ç»„ä»¶çš„åŠŸèƒ½ï¼š</p>
                    <div class="feature-cards">
                        <div class="feature-card" onclick="showView('itemList')">
                            <h3>ğŸ“‹ å•†å“åˆ—è¡¨ç»„ä»¶</h3>
                            <p>ç®¡ç†è´­ç‰©è½¦å•†å“ï¼Œæ”¯æŒæ•°é‡æ§åˆ¶å’Œé‡æ–°æ’åºåŠŸèƒ½</p>
                        </div>
                        <div class="feature-card" onclick="showView('notice')">
                            <h3>âš ï¸ é‡è¦é€šçŸ¥ç»„ä»¶</h3>
                            <p>é…ç½®é‡è¦é€šçŸ¥è®¾ç½®ï¼Œä½¿ç”¨å¼€å…³æ§åˆ¶å„é¡¹åŠŸèƒ½</p>
                        </div>
                    </div>
                    
                    <div class="status-message">
                        <strong>é¡¹ç›®çŠ¶æ€ï¼š</strong> Angular 8.2.14 é¡¹ç›®å·²æˆåŠŸåˆ›å»ºå¹¶é…ç½®å®Œæˆï¼<br>
                        <strong>æ³¨æ„ï¼š</strong> ç”±äº Node.js v22.17.0 ä¸ Angular 8 çš„å…¼å®¹æ€§é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨ Node.js 16 æˆ–æ›´ä½ç‰ˆæœ¬è¿è¡Œå¼€å‘æœåŠ¡å™¨ã€‚
                    </div>
                </div>
            </div>

            <!-- Item List Component -->
            <div id="itemList" class="view-section">
                <div class="item-list-container">
                    <h2 class="item-list-title">ğŸ›’ è´­ç‰©è½¦å•†å“åˆ—è¡¨</h2>
                    
                    <div id="item-drop-zone">
                        <!-- Items will be rendered here dynamically -->
                    </div>
                </div>
            </div>

            <!-- Important Notice Component -->
            <div id="notice" class="view-section">
                <div class="notice-container">
                    <h2 class="notice-title">âš ï¸ é‡è¦é€šçŸ¥è®¾ç½®</h2>
                    
                    <div id="notice-drop-zone">
                        <!-- Notice items will be rendered here dynamically -->
                    </div>

                    <div class="notice-buttons">
                        <button class="notice-btn update-btn" onclick="updateSettings()">æ›´æ–°è®¾ç½®</button>
                        <button class="notice-btn reset-btn" onclick="resetSettings()">é‡ç½®</button>
                        <button class="notice-btn back-btn" onclick="showView('welcome')">è¿”å›</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // è§†å›¾åˆ‡æ¢åŠŸèƒ½
        function showView(viewName) {
            // éšè—æ‰€æœ‰è§†å›¾
            const views = document.querySelectorAll('.view-section');
            views.forEach(view => view.classList.remove('active'));
            
            // æ˜¾ç¤ºæŒ‡å®šè§†å›¾
            document.getElementById(viewName).classList.add('active');
            
            // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            if (viewName === 'welcome') {
                document.getElementById('welcomeBtn').classList.add('active');
            } else if (viewName === 'itemList') {
                document.getElementById('itemListBtn').classList.add('active');
                renderItemList();
            } else if (viewName === 'notice') {
                document.getElementById('noticeBtn').classList.add('active');
                renderNoticeList();
            }
        }

        // Item List Component Logic
        let itemListData = [
            { id: 1, name: 'Apple iPhone 15', price: 5999, quantity: 2 },
            { id: 2, name: 'MacBook Pro 14è‹±å¯¸', price: 14999, quantity: 1 },
            { id: 3, name: 'AirPods Pro', price: 1899, quantity: 3 }
        ];

        // Drag and Drop functionality
        let draggedElement = null;
        let draggedIndex = null;
        let dropZone = null;

        // å•†å“æ•°é‡æ§åˆ¶
        function changeQuantity(itemId, change) {
            const qtyElement = document.getElementById('qty' + itemId);
            let currentQty = parseInt(qtyElement.textContent);
            let newQty = currentQty + change;
            
            if (newQty >= 0) {
                qtyElement.textContent = newQty;
                console.log(`å•†å“ ${itemId} æ•°é‡æ›´æ–°ä¸º: ${newQty}`);
            }
        }

        // åˆ é™¤å•†å“
        function removeItem(itemId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå•†å“å—ï¼Ÿ')) {
                console.log(`åˆ é™¤å•†å“ ${itemId}`);
                alert('å•†å“å·²åˆ é™¤ï¼ˆæ¼”ç¤ºåŠŸèƒ½ï¼‰');
            }
        }

        // æ›´æ–°é€šçŸ¥è®¾ç½®
        function updateSettings() {
            const settings = {
                notice1: document.getElementById('notice1').checked,
                notice2: document.getElementById('notice2').checked,
                notice3: document.getElementById('notice3').checked,
                notice4: document.getElementById('notice4').checked
            };
            
            console.log('é€šçŸ¥è®¾ç½®å·²æ›´æ–°:', settings);
            alert('è®¾ç½®å·²ä¿å­˜ï¼');
        }

        // é‡ç½®é€šçŸ¥è®¾ç½®
        function resetSettings() {
            if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰è®¾ç½®å—ï¼Ÿ')) {
                document.getElementById('notice1').checked = true;
                document.getElementById('notice2').checked = false;
                document.getElementById('notice3').checked = true;
                document.getElementById('notice4').checked = false;
                
                console.log('é€šçŸ¥è®¾ç½®å·²é‡ç½®');
                alert('è®¾ç½®å·²é‡ç½®ï¼');
            }
        }

        // Important Notice Component Logic
        let noticeData = [
            { id: 1, title: 'ç³»ç»Ÿç»´æŠ¤é€šçŸ¥', description: 'æ˜¾ç¤ºç³»ç»Ÿç»´æŠ¤ç›¸å…³çš„é‡è¦é€šçŸ¥', enabled: true },
            { id: 2, title: 'å®‰å…¨è­¦å‘Š', description: 'æ˜¾ç¤ºå®‰å…¨ç›¸å…³çš„è­¦å‘Šä¿¡æ¯', enabled: false },
            { id: 3, title: 'åŠŸèƒ½æ›´æ–°', description: 'æ˜¾ç¤ºæ–°åŠŸèƒ½å’Œæ›´æ–°ç›¸å…³çš„é€šçŸ¥', enabled: true },
            { id: 4, title: 'ä¿ƒé”€æ´»åŠ¨', description: 'æ˜¾ç¤ºä¿ƒé”€å’Œä¼˜æƒ æ´»åŠ¨ç›¸å…³çš„é€šçŸ¥', enabled: false }
        ];

        // Render functions
         function renderItemList() {
             const container = document.getElementById('item-drop-zone');
             if (!container) return;

             container.innerHTML = itemListData.map((item, index) => `
                 <div class="item" data-id="${item.id}" data-index="${index}" draggable="true">
                     <div class="drag-handle">â‹®â‹®</div>
                     <div class="item-info">
                         <div class="item-name">${item.name}</div>
                         <div class="item-price">Â¥${item.price.toLocaleString()}.00</div>
                     </div>
                     <div class="quantity-controls">
                         <button class="quantity-btn" onclick="changeQuantity(${item.id}, -1)">-</button>
                         <span class="quantity-display" id="qty${item.id}">${item.quantity}</span>
                         <button class="quantity-btn" onclick="changeQuantity(${item.id}, 1)">+</button>
                     </div>
                     <div class="action-buttons">
                         <button class="remove-btn" onclick="removeItemByIndex(${index})">åˆ é™¤</button>
                     </div>
                 </div>
             `).join('');
             
             addDragListeners('item-drop-zone', 'item');
         }

        function renderNoticeList() {
             const container = document.getElementById('notice-drop-zone');
             if (!container) return;

             container.innerHTML = noticeData.map((item, index) => `
                 <div class="notice-item" data-id="${item.id}" data-index="${index}" draggable="true">
                     <div class="drag-handle">â‹®â‹®</div>
                     <div class="notice-item-info">
                         <div class="notice-item-title">${item.title}</div>
                         <div class="notice-item-desc">${item.description}</div>
                     </div>
                     <label class="switch">
                         <input type="checkbox" ${item.enabled ? 'checked' : ''} onchange="toggleNoticeByIndex(${index})">
                         <span class="slider"></span>
                     </label>
                 </div>
             `).join('');
             
             addDragListeners('notice-drop-zone', 'notice-item');
         }

        // Drag and Drop functionality
        function addDragListeners(containerId, itemClass) {
            const container = document.getElementById(containerId);
            const items = container.querySelectorAll(`[draggable="true"]`);
            
            items.forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
            });
            
            container.addEventListener('dragover', handleDragOver);
            container.addEventListener('drop', handleDrop);
        }

        function handleDragStart(e) {
              draggedElement = this;
              draggedIndex = parseInt(this.dataset.index);
              this.classList.add('dragging');
              e.dataTransfer.effectAllowed = 'move';
              e.dataTransfer.setData('text/html', this.outerHTML);
              
              // Create placeholder
              setTimeout(() => {
                  if (draggedElement) {
                      const placeholder = document.createElement('div');
                      placeholder.className = 'drag-placeholder';
                      placeholder.style.height = draggedElement.offsetHeight + 'px';
                      placeholder.innerHTML = '<div style="text-align: center; padding: 20px; color: #999;">æ‹–æ”¾åˆ°è¿™é‡Œ</div>';
                      draggedElement.style.display = 'none';
                      draggedElement.parentNode.insertBefore(placeholder, draggedElement);
                  }
              }, 0);
          }

         function handleDragEnd(e) {
             this.classList.remove('dragging');
             this.style.display = '';
             
             // Remove placeholder
             const placeholder = document.querySelector('.drag-placeholder');
             if (placeholder) {
                 placeholder.remove();
             }
             
             draggedElement = null;
             draggedIndex = null;
         }

         function handleDragOver(e) {
             e.preventDefault();
             e.dataTransfer.dropEffect = 'move';
             
             const afterElement = getDragAfterElement(e.currentTarget, e.clientY);
             const placeholder = document.querySelector('.drag-placeholder');
             
             if (placeholder) {
                 if (afterElement == null) {
                     e.currentTarget.appendChild(placeholder);
                 } else {
                     e.currentTarget.insertBefore(placeholder, afterElement);
                 }
             }
         }

        function handleDrop(e) {
            e.preventDefault();
            
            if (!draggedElement) return;
            
            const placeholder = document.querySelector('.drag-placeholder');
            if (!placeholder) return;
            
            // Get original index from dragged element
            const originalIndex = parseInt(draggedElement.dataset.index);
            
            // Calculate new index based on placeholder position
            const container = e.currentTarget;
            const allChildren = Array.from(container.children);
            const placeholderIndex = allChildren.indexOf(placeholder);
            
            // Count non-placeholder, non-dragged elements before placeholder
            let newIndex = 0;
            for (let i = 0; i < placeholderIndex; i++) {
                const child = allChildren[i];
                if (child !== draggedElement && !child.classList.contains('drag-placeholder')) {
                    newIndex++;
                }
            }
            
            // Remove placeholder
            placeholder.remove();
            
            // Restore dragged element display
            draggedElement.style.display = '';
            draggedElement.classList.remove('dragging');
            
            // Only update if position actually changed
            if (newIndex !== originalIndex) {
                // Update data arrays
                if (container.id === 'item-drop-zone') {
                    const [removed] = itemListData.splice(originalIndex, 1);
                    itemListData.splice(newIndex, 0, removed);
                    renderItemList();
                } else if (container.id === 'notice-drop-zone') {
                    const [removed] = noticeData.splice(originalIndex, 1);
                    noticeData.splice(newIndex, 0, removed);
                    renderNoticeList();
                }
            }
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('[draggable="true"]:not(.dragging)')];
            
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        // Updated remove function
         function removeItemByIndex(index) {
             if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå•†å“å—ï¼Ÿ')) {
                 itemListData.splice(index, 1);
                 renderItemList();
                 console.log(`åˆ é™¤å•†å“ ${index}`);
             }
         }

         // Toggle notice function
         function toggleNoticeByIndex(index) {
             noticeData[index].enabled = !noticeData[index].enabled;
             console.log(`é€šçŸ¥ ${index} çŠ¶æ€æ›´æ–°ä¸º: ${noticeData[index].enabled}`);
         }

         // Keep original functions for compatibility
         function removeItem(index) {
             removeItemByIndex(index);
         }

         function toggleNotice(index) {
             toggleNoticeByIndex(index);
         }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            showView('welcome');
            renderItemList();
            renderNoticeList();
            console.log('Angular 8 ItemList åº”ç”¨æ¼”ç¤ºé¡µé¢å·²åŠ è½½');
        });
    </script>
</body>
</html>